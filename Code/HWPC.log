---------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\ricar\Dropbox\Apps\GitHub\Monetary-Policy-and-the-Wage-Inflation-Unemployment-Trade
> off\Code\HWPC.log
  log type:  text
 opened on:   5 May 2023, 15:13:38

. clear all

. set more off

. set scheme s1color

. graph set window fontface "Linux Biolinum O"        // set default font (window)

. graph set window fontfacesans "Linux Biolinum O"    // set default sans font (window)

. graph set window fontfaceserif "Linux Libertine O"  // set default serif font (window)

. graph set window fontfacemono "DejaVu Sans Mono"    // set default mono font (window)

. 
. 
. ********************************************************************************
. * Control Panel
. ********************************************************************************
. 
. * Master - choose number of horizons for the IRFs
. global hf               = 10

. 
. * Choose number of horizons for the quarterly IRFs
. global hfq              = 40

. 
. * Master - choose number of lags for the IRFs
. global lags     = 2

. global lagsq    = 4

. 
. * Master - use matched sample (that is, all horizons with same # obs)
. global match    = 1

. 
. * Master - estimation of AR conf bands: set number of gridpoints and conf level
. global gridd    = 100

. global levell   = 90

. 
. * Master - choose whether outlier is identified when wage inflation is above 50% in absolute value (fif
> ty=1)
. *                  or when it is either in top or bottom 1% of the sample (fifty=0) - robustness check
. global fifty    = 1

. 
. * Master - produce figure for slides (slides==1) or for paper (slides==0)
. global slides   = 0

. 
. * Master - asymmetry specifications, choose one at a time from the following list
.         * lowflat       -       low vs high cpi inflation
.         * boombust      -       bust vs boom in the economy (negative or positive unemployment gap usin
> g an hp filter)
.         * negpos        -       negative vs positive change in short run interest rate 
.         * tradeoc       -       degree of trade openess (more vs less) measured by having more than 40%
>  of (imports+exports) / gdp (40% is close to mean and median)
.         * capitaloc     -       degree of capital openess (open vs close) measured as in Quinn et al. (
> 2011)
.         * postwar   -   d
. global state    = "lowflat"

. ********************************************************************************
. 
. 
. * Prepare Data with all observations
. global wage_out = 0

. do Data_Management

. quietly{

. 
. ********************************************************************************
. * Saving the Data
. ********************************************************************************
. xtset id year
       panel variable:  id (strongly balanced)
        time variable:  year, 1870 to 2019
                delta:  1 year

. 
. drop if year>=2020
(0 observations deleted)

. 
. save "$hp\Data\Data_MScThesis_Analysis.dta", replace
file C:\Users\ricar\Dropbox\Apps\GitHub\Monetary-Policy-and-the-Wage-Inflation-Unemployment-Tradeoff\\Dat
> a\Data_MScThesis_Analysis.dta saved

. 
end of do-file

. 
. * Produce descriptive statistics
. ** Table 1 + Table A.2 + Table A.3
. do Descriptives

. /*
> Table Descriptives 
> 
> Produce Tables 1, A.2, and A.3
> */
. 
. quietly{

. 
end of do-file

. 
. ** Figure 1
. do Figure_1

. /*
> Produce Figure 1
> */
. 
. quietly{

. /* Weighted version is too similar
> 
> ********************************************************************************
> * Figure A.1 estimation - Rolling Window for weighted mean wage inflation and unemployment rate
> ********************************************************************************
> 
> * set size of rolling window (how many years?)
> local window = 10
> bysort year (id): gen pick = _n == 1
> gen high = cond(pick, year, -99)
> 
> * create new program for rolling window estimation
> program drop _all
> program mypanel
>     xtset id year
>     gen year1 = r(tmin)
>         foreach v in unemp dlwage{
>     cap noi sum `v' [aw=pop] if noval==0
>     gen b_`v' = r(mean)
>     }
> end
> 
> local nwindow = -`window'
> 
> * use rangerun command to run rolling window
> rangerun mypanel, interval (year `nwindow' high) verbose
> 
> 
> ********************************************************************************
> * Figure A.1 - produce graphism
> ********************************************************************************
> 
> * create variables to highlight different historical periods (max and min of previous estimates)
> gen t=13
> gen tt=-1
> 
> * Figure for slides
> if ($slides == 1) {
> twoway (rarea t tt year if (year>=1870 & year<=1913), color(gs15*0.95)) (rarea t tt year if (year>=1946
>  & year<=1971), color(gs15*0.95)) ///
>         (rarea t tt year if (year>=1995), color(gs15*0.95)) (line b_dlwage year, lcolor(olive) lwidth(t
> hick)) (line b_unemp year, lcolor(gs4) lpa("-") lwidth(thick)), ytitle("Percent (%)") ///
> legend( c(1) order(4 "Wage Inflation" 5 "Unemployment") ring(0) position(4) ) ylabel(0(3)12) ///
> xlabel(1880(20)2020) xtitle("") xsize(4) ysize(2) scale(1.3) graphregion(fcolor(gs15*0.33333))
> graph export "$hp\Output\Figures\Median_dwn_unemp_w.pdf", replace
> }
> 
> else if ($slides == 0) {
> * Figure for paper
> twoway (rarea t tt year if (year>=1870 & year<=1913), color(gs15*0.95)) (rarea t tt year if (year>=1946
>  & year<=1971), color(gs15*0.95)) ///
>         (rarea t tt year if (year>=1995), color(gs15*0.95)) (line b_dlwage year, lcolor(olive) lwidth(t
> hick)) (line b_unemp year, lcolor(gs4) lpa("-") lwidth(thick)), ytitle("Percent (%)") ///
> legend( c(1) order(4 "Wage Inflation" 5 "Unemployment") ring(0) position(4) ) ylabel(0(3)12) ///
> xlabel(1880(20)2020) xtitle("") xsize(6) ysize(3) scale(1.3)
> graph export "$hp\Output\Figures\Median_dwn_unemp_paper_w.pdf", replace
> }

end of do-file

. 
. *** Main Analysis
. /*
> * Prepare Data without wage variable for outliers and war periods 
> global wage_out = 1
> do Data_Management
> 
> *Produce Rolling Window graphs
> * Figure 2
> do Figure_2
> 
> * First Stage Results of Monetary Policy Shocks (Trilemma Instrumental Variable)
> ** Table 3
> do First_Stage                  
> 
> 
> * Phillips Multiplier
> ** Figures 3 a) and 3 b)
> do PM_BM
> 
> 
> ** Figure 3 c)
> do MP_IRFs_BM
> 
> ** Figure A.1
> * Effects of Monetary Policy (as in JST 2020)
> do MP_IRFs
> 
> * State Dependent Phillips Multipliers
> * Figure 5 and Table A.7
> do SD_BM
> 
> 
> * Figure 4
> global state    = "postwar"
> do SD_BM
> 
> 
> *** Other Figures in Appendix 
> * Figure A.2 and Table A.6 (unmatched 15 years)
> global hf = 15
> global match = 0
> global state    = "lowflat"
> do SD_BM
> 
> 
> *******************************************************************************
> * Quarterly analysis
> global match = 1
> global wage_out = 1
> do Data_Management_Quarter
> 
> * First Stage Results of Monetary Policy Shocks (Trilemma Instrumental Variable)
> *do First_Stage_Quarter
> 
> * Phillips Multiplier Quarterly Data
> ** Figures 3 a) and 3 b)
> *do PM_BM_Quarter
> 
> ** Figure 3 c)
> *do MP_IRFs_BM_Quarter
> 
> 
> * State Dependent Phillips Multipliers
> * Figure ?? and Table ??
> global state    = "lowflat"
> do SD_BM_Quarter

end of do-file

. do "C:\Users\ricar\AppData\Local\Temp\STD3f8c_000000.tmp"

. estpost tabstat unemp dwn dp if noval==0 & outlier==0, by(window) stat(n p50 mean sd min max) col(stat)
variable window not found
(error in option by())
r(111);

end of do-file

r(111);

. do "C:\Users\ricar\AppData\Local\Temp\STD3f8c_000000.tmp"

. use "$hp\Data\Data_MScThesis_Analysis.dta", clear

. set more off

. 
. * Graphs management
. graph drop _all

. set scheme s1mono

. graph set window fontface default

. capture graph set window fontface Helvetica

. 
.                                                         *** Descriptives *** 
. 
. *Adjust here if you want to construct the dataset according to explicit or implicit inflation targeting
. global EXPLICIT=1

. do HistoricalPeriods

. /*
> Historical Periods
> 
> Here, I construct the historical peridos used in the Descriptives section.
> This classification is based on Table B.1. in the Appendix of the paper.
> */
. 
. quietly{

. 
end of do-file

.                                                         
.                                                         
. *Generating windows for descriptives analysis
. gen window=""
(2,700 missing values generated)

. replace window="1870-1913" if year<=1913 & year>=1870
variable window was str1 now str9
(792 real changes made)

. replace window="1920-1938" if year<=1938 & year>=1920
(342 real changes made)

. replace window="1946-1971" if year<=1971 & year>=1946
(468 real changes made)

. replace window="1972-1999" if year<=1999 & year>=1972
(504 real changes made)

. replace window="2000-2020" if year<=2020 & year>=2000
(360 real changes made)

. 
. ********************************************************************************
. * Table 2 - Descriptive statistics table (main sample)
. ********************************************************************************
. *To exclude the observations for which one of the trio variables is missing
. *include the variable noval in the tabstat command (now also with price inflation)
. replace noval=1 if unemp==. | dwn==. | dp==.
(0 real changes made)

. 
. estpost tabstat unemp dwn dp if noval==0 & outlier==0, by(window) stat(n p50 mean sd min max) col(stat)

Summary statistics: count p50 mean sd min max
     for variables: unemp dwn dp
  by categories of: window

      window |  e(count)     e(p50)    e(mean)      e(sd)     e(min)     e(max) 
-------------+------------------------------------------------------------------
1870-1913    |                                                                  
       unemp |       223   3.433889   4.079205   2.746125         .2       18.4 
         dwn |       223   1.677149   1.682527   2.630929  -6.710671   10.25943 
          dp |       223   .2154678   .3863919   3.205294  -10.94235   11.56097 
-------------+------------------------------------------------------------------
1920-1938    |                                                                  
       unemp |       268       5.85   7.169665   4.988088         .6       24.9 
         dwn |       268   .5251064   1.256395   8.626197  -27.71604   43.96599 
          dp |       268          0   -.288989   7.234616  -18.45018   30.43478 
-------------+------------------------------------------------------------------
1946-1971    |                                                                  
       unemp |       428   2.072727   2.602807   1.829869   .0381528   9.923077 
         dwn |       428   7.074716   7.773532   5.098241  -10.78282   35.29412 
          dp |       428   3.229563   4.084873   3.764423  -6.866704   20.37937 
-------------+------------------------------------------------------------------
1972-1999    |                                                                  
       unemp |       504   6.629231   7.071776   4.295835   .0359226    24.2087 
         dwn |       504   6.683088   8.298505   6.268544  -1.420051   32.28492 
          dp |       504   5.026458    6.56101   5.509912  -.7078078    37.8819 
-------------+------------------------------------------------------------------
2000-2020    |                                                                  
       unemp |       360     6.3638   7.058696   3.544274          2    26.0936 
         dwn |       360    2.51518   2.413602   1.720488  -3.491477   7.502242 
          dp |       360    1.72844   1.692833   1.278395  -4.480427   5.565171 
-------------+------------------------------------------------------------------
Total        |                                                                  
       unemp |      1783   4.740343   5.636814   4.131366   .0359226    26.0936 
         dwn |      1783   3.809524   5.098336   6.299129  -27.71604   43.96599 
          dp |      1783    2.33215   3.181835   5.298986  -18.45018    37.8819 

. esttab using "$Tab\Table_Descriptives.tex", cells("count(fmt(0)) p50(fmt(2)) mean(fmt(2)) sd(fmt(2)) mi
> n(fmt(2)) max(fmt(2))") noobs nonumber label replace ///
>         title("Descriptive statistics \label{T:Descriptives}")
(output written to C:\Users\ricar\Dropbox\Apps\GitHub\Monetary-Policy-and-the-Wage-Inflation-Unemployment
> -Tradeoff\Output\Tables\Table_Descriptives.tex)

. 
end of do-file

. do "C:\Users\ricar\Dropbox\Apps\GitHub\Monetary-Policy-and-the-Wage-Inflation-Unemployment-Tradeoff\Cod
> e\Descriptives.do"

. /*
> Table Descriptives 
> 
> Produce Tables 1, A.2, and A.3
> */
. 
. quietly{

. 
end of do-file

. do "C:\Users\ricar\Dropbox\Apps\GitHub\Monetary-Policy-and-the-Wage-Inflation-Unemployment-Tradeoff\Cod
> e\Data_Management.do"

. quietly{

. 
. ********************************************************************************
. * Saving the Data
. ********************************************************************************
. xtset id year
       panel variable:  id (strongly balanced)
        time variable:  year, 1870 to 2019
                delta:  1 year

. 
. drop if year>=2020
(0 observations deleted)

. 
. save "$hp\Data\Data_MScThesis_Analysis.dta", replace
file C:\Users\ricar\Dropbox\Apps\GitHub\Monetary-Policy-and-the-Wage-Inflation-Unemployment-Tradeoff\\Dat
> a\Data_MScThesis_Analysis.dta saved

. 
end of do-file

. do "C:\Users\ricar\Dropbox\Apps\GitHub\Monetary-Policy-and-the-Wage-Inflation-Unemployment-Tradeoff\Cod
> e\Descriptives.do"

. /*
> Table Descriptives 
> 
> Produce Tables 1, A.2, and A.3
> */
. 
. quietly{

. 
end of do-file

